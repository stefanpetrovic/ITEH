
/* content-share-buttons-int.js fa3a776 */ YUI.add("media-content-share-buttons-int",function(c){var a="media:remove-node";function b(d){b.superclass.constructor.apply(this,arguments)}b.NAME="contentsharebuttonsint";c.extend(b,c.Media.MediaContentSocialBase,{initializer:function(d){var e="";if(d.modId){this.config={};this.config.modId=d.modId;this.config.sec=d.sec||"unv-sh";this.config.container=d.container;this.config.device=d.device;this.config.moreMenuPosition=d.moreMenuPosition||"bottom";this.config.moreMenuDelay=d.moreMenuDelay||20;this.modNode=null;this.orientationDetect=null;this._onCloseHandlers={};if(c.one("#"+this.config.modId)!==null){this.modNode=c.one("#"+this.config.modId)}else{if(c.one(this.config.container)!==null){this.modNode=c.one(this.config.container)}else{c.log("No modNode found!");return}}if(d.btns instanceof Array){this.globalEvt=d.btns}else{this.globalEvt=new Array();this.globalEvt.push("tumblr");this.globalEvt.push("facebook");this.globalEvt.push("twitter");this.globalEvt.push("mail");this.globalEvt.push("whatsapp")}if(!(d.isForBeacon&&d.isForBeacon=="1")){this._globalEventPublisher();this._globalEventHandlers(this.modNode)}if(d.device==="smartphone"&&this.modNode!==null){if(c.UA.android<3&&c.UA.android>1){this.modNode.all(".share-btn .btn-popup").addClass("fallback")}this.config.overlayBlob=d.overlayBlob}if(c.UA.android){e="android"}else{if(c.UA.ios&&c.UA.ios>=7){e="ios7"}else{if(c.UA.ios){e="ios6"}}}if(e){this.modNode.all(".share-btn").addClass(e)}if(c.UA.android>0||(c.UA.safari&&c.UA.safari<536)){c.all(".share-btns-int-container .btn-icon").addClass("fallback")}if(d.container&&c.one(d.container)!==null){this._buttonClickHandler(d.container)}this.config.doClean=c.Global.on(a,this._doClean,this)}},_renderOverlay:function(){var e=this,d=c.DOM.viewportRegion(),h=this.config.modId;this.overlayNode=c.Node.create(this.config.overlayBlob).addClass(h);if(c.UA.android<3&&c.UA.android>1){this.overlayNode.all(".share-btn .btn-icon").addClass("fallback")}if(!(c.UA.iphone>=7)){this.overlayNode.one(".share-btn.cancel").addClass("bottom")}this.overlayNode.all(".share-btn").addClass("hidden");var j=this.overlayNode.one(".share-btn.cancel");if(j){j.removeClass("hidden")}for(var g=0;g<this.globalEvt.length;g++){var f=this.overlayNode.one(".share-btn."+this.globalEvt[g]);if(f){f.removeClass("hidden")}}this.overlay=new c.Overlay({srcNode:this.overlayNode.one(".share-btns-overlay"),zIndex:20000000});c.one("body").append(this.overlayNode);this.overlay.render();this._buttonClickHandler(".share-btn-int-overlay-container");this.MDHeight=d.height;this._orientationDetection();this._adjustOverlayButtonsStyle();c.all("video").setAttribute("controls",false).addClass("hidden");c.one("body").on("share-btn-int-overlay|touchmove",function(i){i.preventDefault()},this)},_adjustOverlayButtonsStyle:function(){var e=this.config.modId,d=c.DOM.viewportRegion(),f=c.one("."+e+" .share-btns-popup-layout");if(f){if(d.width>d.height){f.addClass("landscape")}else{f.removeClass("landscape")}}},_orientationDetection:function(){var d=this,e=this.config.modId;if(this.orientationDetect===null){c.detach("share-btn-int-overlay|resize");this.orientationDetect=c.on("share-btn-int-overlay|resize",function(h){var f=c.DOM.viewportRegion(),g=f.height,i=f.width;d.overlay.syncUI();if(d.overlay!==null){if(g!=d.MDHeight||i!=d.MDWidth){d.MDHeight=g;d._adjustOverlayButtonsStyle();d.overlay.syncUI()}}})}},_globalEventPublisher:function(){var f=this.config.modId;if(c.Global){for(var d=0;d<this.globalEvt.length;d++){var e=f+":"+this.globalEvt[d];c.Global.publish(e,{broadcast:true})}}},_handleTooltip:function(f){var d,e;if(!f||c.UA.mobile){return}d=c.Node.create('<div class="sharebuttons-tooltip"><div class="yui3-widget-bd">bd</div><div class="yui3-widget-ft"></div></div>');this.tooltip=new c.Overlay({srcNode:d,zIndex:100001000});this.tooltip.hide();this.tooltip.render();f.delegate("tooltip|mouseover",function(i){var h=i.currentTarget.ancestor(".share-btn"),g=h&&h.getAttribute("class")||"";if(g.indexOf("more")>-1){return}e=i.currentTarget.getAttribute("title");this.tooltip.set("bodyContent",e);this.tooltip.set("align",{node:i.currentTarget,points:[c.WidgetPositionAlign.BC,c.WidgetPositionAlign.TC]});d.setAttribute("class","sharebuttons-tooltip "+g.replace("share-btn",""));this.tooltip.show()},".share-btn a",this);f.delegate(["tooltip|mouseout","tooltip|click"],function(){this.tooltip.hide()},".share-btn a",this)},_globalEventHandlers:function(f){var d=this,e=this.config.modId;this._handleTooltip(f);c.Global.on(e+"|"+e+":share-overlay",function(g){d._renderOverlay();d._beaconEvent("click",{t1:"a3",t2:"sh",sec:"sh",elm:"img",elmt:"op",_p:1,slk:"menu-sh",itc:1,respns:"op"})});c.Global.on(e+"|"+e+":comment",function(i){var g=i.getAttribute("href"),h=c.one(g);if(h!==null){h.scrollIntoView()}});c.Global.on(e+"|"+e+":mail",function(h){var g=h.getAttribute("href");if(d.config.device==="smartphone"||(f&&f.contains(h))){if(g.indexOf("mailto:")==-1){d._popupWindow(h,500,500)}d._beaconClick(d._getSec(h),"btn-sh-ma",d._getPos(h),{itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-ma",_p:d._getPos(h),cpos:d._getPos(h)},"sh")}});c.Global.on(e+"|"+e+":facebook",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-fb",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-fb",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":twitter",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-tw",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-tw",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":pinterest",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h,600,600);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-pi",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-pi",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":tumblr",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-tu",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-tu",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":gplus",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-gp",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-gp",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":linkedin",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h,620,530);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-li",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-li",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":whatsapp",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-fb",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-wa",d._getPos(h),g,"wa");window.location=h._node.getAttribute("href")}});this._onCloseHandlers.popupClose=c.Global.on(e+"|"+this.mod_id+":popupClose",function(h){if("mail"===h.name||"facebook"===h.name){return}var g="";switch(h.name){case"twitter":g="tw";break;case"facebook":g="fb";break;case"tumblr":g="tu";break;case"pinterest":g="pi";break;case"gplus":g="gp";break;case"linkedin":g="li";break;case"mail":g="ma";break;case"whatsapp":g="wa";break;default:""}this._fireCloseBeacon(g)},this)},_fireCloseBeacon:function(d){this._beaconClick("sh","send-"+d,1,{itc:1,mid:this.config.modId,t1:"a0",t2:"sh",t3:"send",elm:"btn",elmt:"send-"+d,_p:1})},_getSec:function(d){return(d&&d.hasAttribute("data-share-sec"))?d.getAttribute("data-share-sec"):"unv-sh"},_getPos:function(k){var d=k.getAttribute("data-rapid_p"),j=k.ancestor(),g=j.ancestor().get("childNodes"),f=0;if(d!==""){return d}if(j.ancestor(".moreBoxInner")!==null){f=4}for(var h=0;h<g.size();h++){if(g.item(h)===j){return h+1+f}}},_getT3:function(d){return(d&&d.hasAttribute("data-share-pos"))?d.getAttribute("data-share-pos"):false},_buttonClickHandler:function(f){var g=this,d=c.one(f),k=g.config.modId;if(this.config.device==="smartphone"){d.delegate(k+"|click",function(m){if(m.currentTarget.one("a")!==null){var l=m.currentTarget.one("a").getAttribute("href");if(l.indexOf("mailto:")==-1){m.preventDefault();m.stopPropagation()}}c.one("body").detach("share-btn-int-overlay|touchmove");g.overlayNode.remove(true);g.orientationDetect=null;c.all("video").setAttribute("controls",true).removeClass("hidden")},".close-btn",this)}d.delegate(k+"|click",function(n){var m=k+":"+n.currentTarget.getAttribute("data-share-key"),l=n.currentTarget.getAttribute("href");c.Global.fire(k+":clickButton");if(m!==undefined||evtname!=""){if(l.indexOf("mailto:")==-1){n.halt()}c.Global.fire(m,n.currentTarget)}},".share-btn a",this);var j=d.one(".moreBox"),i=d.all(".share-btn.more a"),e,h=0;if(j&&i.size()>0){e=setInterval(function(){h++;if(j&&j.ancestor("body")){e=window.clearInterval(e);var l=new c.Overlay({srcNode:j,zIndex:100000000}).render(),n,m=function(){j.addClass("hidden")};i.on(k+"|mouseenter",function(o){g._displayMoreMenu(o,j,l,g.config.moreMenuPosition)},g);i.on(k+"|mouseover",function(o){if(n){clearTimeout(n)}},g);i.on(k+"|mouseout",function(o){n=setTimeout(m,g.config.moreMenuDelay)},g);j.on(k+"|mouseover",function(o){if(n){clearTimeout(n)}},g);j.on(k+"|mouseout",function(o){n=setTimeout(m,g.config.moreMenuDelay)},g);i.on(k+"|click",function(o){o.halt();if(j.hasClass("hidden")){g._displayMoreMenu(o,j,l,g.config.moreMenuPosition)}else{j.addClass("hidden")}},g)}else{if(h>20){e=window.clearInterval(e)}}},100)}},_displayMoreMenu:function(h,i,f,d){i.removeClass("hidden");f.set("align",{node:h.currentTarget,points:(d&&"top"===d)?[c.WidgetPositionAlign.BR,c.WidgetPositionAlign.TR]:[c.WidgetPositionAlign.TR,c.WidgetPositionAlign.BR]});var g=f.get("xy");f.move([g[0]+10,g[1]])},_popupWindow:function(l,g,s,q,r){var e=l.getAttribute("href"),r=(r===undefined)?l.getAttribute("data-share-key"):r,m=this.config.modId,g=(g)?g:500,s=(s)?s:450,q=(q===undefined)?"yes":"no";pos=(l.getAttribute("data-share-pos")!="")?("-"+l.getAttribute("data-share-pos")):"";var h=window.outerWidth||document.documentElement.clientWidth||document.body.clientWidth;var d=window.outerHeight||document.documentElement.clientHeight||document.body.clientHeight;var k=window.screenX||window.screenLeft||0;var i=window.screenY||window.screenTop||0;var j=(h/2)-(g/2)+k;var p=(d/2)-(s/2)+i;if(e===undefined||e==""||r===undefined||r==""||m===undefined||m==""){return}var o=window.open(e,r,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+q+", resizable=yes, copyhistory=no, width="+g+", height="+s+", top="+p+", left="+j),f={name:r,pos:pos},n=setInterval(function(){if(o.closed){clearInterval(n);c.Global.fire(m+":popupClose",f);c.Global.fire("rumbleStrip:open",f)}},1000);this.childWindow=o},updateShareInfo:function(M){if(!M||!M.url){return}if(this.modNode){if(-1==M.url.indexOf("http")){M.url=location.protocol+"//"+location.host+M.url}var q=(this.config.device==="smartphone"&&this.config.overlayBlob)?c.Node.create(this.config.overlayBlob):this.modNode,D=q.one(".facebook a"),O=q.one(".twitter a"),I=q.one(".tumblr a"),G=q.one(".pinterest a"),z=q.one(".linkedin a"),t=q.one(".mail a"),L=q.one(".gplus a"),h=q.one(".whatsapp a"),C=D&&D.get("href"),g=O&&O.get("href"),w=I&&I.get("href"),E=G&&G.get("href"),n=z&&z.get("href"),A=t&&t.get("href"),d=L&&L.get("href"),v=h&&h.get("href");if(C&&-1!=C.indexOf("?")){var J=C.substr(0,C.indexOf("?")),k=c.QueryString.parse(C.substr(C.indexOf("?")+1));k.link=encodeURIComponent(this._addTrackingParam(M.url,"fb"));k.picture=(M.img)?encodeURIComponent(M.img):"";k.name=encodeURIComponent((M.title)?M.title:k.name);k.description=encodeURIComponent((M.desc)?M.desc:k.description);k.source=(M&&M.img&&M.video)?encodeURIComponent(M.video):"";D.set("href",J+"?"+c.QueryString.unescape(c.QueryString.stringify(k)))}if(w&&-1!=w.indexOf("?")){var l="",u={},f=(M.desc&&M.desc.length>0)?M.desc:M.title;if(M.video){l="https://www.tumblr.com/share/video";u.embed=encodeURIComponent(this._addTrackingParam(M.url,"tu"));u.caption=encodeURIComponent(f)}else{if(M.img){l="https://www.tumblr.com/share/photo";u.clickthru=encodeURIComponent(this._addTrackingParam(M.url,"tu"));u.caption=encodeURIComponent(f);u.source=encodeURIComponent(M.img)}else{l="https://www.tumblr.com/share/link";u.url=encodeURIComponent(this._addTrackingParam(M.url,"tu"));u.name=(M.title)?encodeURIComponent(M.title):"";u.description=(M.desc)?encodeURIComponent(M.desc):""}}I.set("href",l+"?"+c.QueryString.unescape(c.QueryString.stringify(u)))}if(E&&-1!=E.indexOf("?")){var N=E.substr(0,E.indexOf("?")),x=c.QueryString.parse(E.substr(E.indexOf("?")+1)),i=(M.desc)?this._decodeHTML(M.desc):"";x.url=encodeURIComponent(this._addTrackingParam(M.url,"pi"));x.media=(M.img)?encodeURIComponent(M.img):"";x.description=(i)?encodeURIComponent(i.substring(0,480)):"";G.set("href",N+"?"+c.QueryString.unescape(c.QueryString.stringify(x)))}if(g&&-1!=g.indexOf("?")){var o=g.substr(0,g.indexOf("?")),F=c.QueryString.parse(g.substr(g.indexOf("?")+1)),K=(M.text&&M.text.length)?M.text:((M.title&&M.title.length)?M.title:"");F.url=encodeURIComponent(this._addTrackingParam(M.url,"tw"));F.text=encodeURIComponent((K.length>100)?K.substring(0,97)+"...":K);O.set("href",o+"?"+c.QueryString.unescape(c.QueryString.stringify(F)))}if(d&&-1!=d.indexOf("?")){var H=d.substr(0,d.indexOf("?")),s=c.QueryString.parse(d.substr(d.indexOf("?")+1));s.url=encodeURIComponent(this._addTrackingParam(M.url,"gp"));s.hl=(YMedia&&YMedia.Media&&YMedia.Media.pageChrome&&YMedia.Media.pageChrome.lang)?YMedia.Media.pageChrome.lang:"en-US";L.set("href",H+"?"+c.QueryString.unescape(c.QueryString.stringify(s)))}if(n&&-1!=n.indexOf("?")){var B=n.substr(0,n.indexOf("?")),j=c.QueryString.parse(n.substr(n.indexOf("?")+1));j.url=encodeURIComponent(this._addTrackingParam(M.url,"li"));j.title=encodeURIComponent(M.title);j.summary=encodeURIComponent(M.desc);z.set("href",B+"?"+c.QueryString.unescape(c.QueryString.stringify(j)))}if(v&&-1!=v.indexOf("?")){var r=v.substr(0,v.indexOf("?")),y=c.QueryString.parse(v.substr(v.indexOf("?")+1));y.text=encodeURIComponent(this._addTrackingParam(M.url,"wa"));h.set("href",r+"?"+c.QueryString.unescape(c.QueryString.stringify(y)))}if(A&&-1!=A.indexOf("?")){var p=A.substr(0,A.indexOf("?")),m=c.QueryString.parse(A.substr(A.indexOf("?")+1));if(this.config.device==="smartphone"){m.body=M.url;m.subject=(M.title)?M.title:""}else{m.url=encodeURIComponent(this._addTrackingParam(M.url,"ma"));m.share_image=(M.img)?encodeURIComponent(M.img):"";m.alias_id=""}t.set("href",p+"?"+c.QueryString.unescape(c.QueryString.stringify(m)))}if(this.config.device==="smartphone"&&this.config.overlayBlob){this.config.overlayBlob=q.get("outerHTML")}}},_addTrackingParam:function(f,g){if(!f){return""}var e=f.indexOf("?"),d=(-1===e)?f:f.substr(0,e),h=(-1===e)?{}:c.QueryString.parse(f.substr(e+1));h.soc_src=this.config.sec;return d+"?"+c.QueryString.unescape(c.QueryString.stringify(h))},_doClean:function(h){if(!h){return}var d=this,f=d.config,g=h.node,i=d.modNode;if(g.contains(i)){c.detach("share-btn-int-overlay|*");c.one("body").detach("share-btn-int-overlay|*");c.Global.detach(this.config.modId+"|*");this.modNode.detach("tooltip|*");if(this.tooltip){this.tooltip.destroy(true)}if(this.config.doClean&&this.config.doClean.detach){this.config.doClean.detach()}this.config=null;d=null}},destructor:function(){c.detach("share-btn-int-overlay|*");c.one("body").detach("share-btn-int-overlay|*");c.Global.detach(this.config.modId+"|*");this.modNode.detach("tooltip|*");if(this.tooltip){this.tooltip.destroy(true)}if(this.config.doClean&&this.config.doClean.detach){this.config.doClean.detach()}this.config=null}});c.namespace("Media").ContentShareButtonsInt=b},"0.1.0",{requires:["base-base","base-build","base-pluginhost","event-base","event-custom","node-base","node-core","io","json","querystring-stringify-simple","overlay","dom-screen","media-content-social-base"]});
/* content-social-base.js d0b486f */ YUI.add("media-content-social-base",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="mediacontentsocialbase";b.extend(a,b.Base,{initializer:function(d){var c=this;if(d&&d.mod_id){c.mod_id=d.mod_id}else{if(d&&d.modId){c.mod_id=d.modId}}},_beaconClick:function(f,c,i,d,g){var h;d.mid=this.mod_id;h={data:{sec:f,linkname:c,pos:parseInt(i,10),keys:d},mod_id:this.mod_id};if(g){h.data.outcome=g}b.Global.fire("rapid-tracker:click",h)},_beaconEvent:function(d,c,f){var g;c.mid=this.mod_id;c.act=d;g={data:{name:d,keys:c},mod_id:this.mod_id};if(f){g.data.outcome=f}b.Global.fire("rapid-tracker:event",g)},_decodeHTML:function(f){var e=b.Node.create("<p>"+f+"</p>"),d=e.get("innerText"),c=(d)?d:e.get("textContent");return c},_updateMixer:function(p,g,j){if(!j.id){return}var h="",k=this;switch(p){case"email":h="email";break;case"fb:like":h="fblike";break;case"fb:recommend":h="fbrecommend";break;case"fb:follow":h="follow";break;case"fbshare":h="fbshare";break;case"tweet":h="tweet";break;case"tumblr":h="share";break;case"linkedin":h="share";break;case"tw:follow":h="follow";break;case"inshare":h="lnkdshare";break;case"googleplus":h="plusone";break;case"pinterest":h="pinit";break;case"userstatus":h="userstatus";break;case"whatsapp":h="share";break;case null:case"mail":case"print":default:return}var i="action="+h+"&site="+g.site+"&region="+g.region+"&lang="+g.lang+"&crumb="+g.scrumb,l="/_xhr/mixer-update/";switch(h){case"follow":var c=g.url_orig,m=g.title_orig,r=g.content_id,q=j.id,e=j.name,f=j.url;i+="&url="+c+"&title="+m+"&content_id="+r+"&event_id="+q+"&event_name="+e+"&event_url="+f;break;case"userstatus":break;default:var c=j.url_orig,m=j.title_orig,r=j.id,o=j.summary,n=j.type;i+="&url="+c+"&title="+m+"&content_id="+r+"&description="+o+"&contentType="+n}if(window.FB){FB.getLoginStatus(function(s){if(s.status=="connected"){i+="&fbid="+s.authResponse.userID+"&access_token="+s.authResponse.accessToken+"&expires_in="+s.authResponse.expiresIn}})}var d={method:"POST",data:i,context:this,sync:false,on:{start:function(){},complete:function(){},success:function(v,s,u){var t=b.JSON.parse(s.responseText);k.userConnectStatus=t},failure:function(){}}};b.io(l,d)},_getShortenLinkUrl:function(g,d,f){if("bitly"===g){var c="/_xhr/shorten-link/?method=bitly&ourl="+d,e={method:"GET",context:this,sync:false,on:{success:f,failure:function(){}}};b.io(c,e)}},_fireBeacon:function(j){var d=(j.currentTarget.getAttribute("href"))?j.currentTarget.getAttribute("href").replace("http://",""):"",c=(j.currentTarget.getAttribute("data-ylk"))?j.currentTarget.getAttribute("data-ylk").replace(/"/g,"").split(";"):null,h="";for(var g=0;g<c.length;g++){var f=c[g].split(":");if(f[0]&&f[1]){if(h){if(f[0]!=="itc"&&f[0]!=="_p"&&f[0]!=="cpos"){h+=',"'+f[0]+'":"'+f[1]+'"'}else{h+=',"'+f[0]+'":'+f[1]}}else{if(f[0]!=="itc"&&f[0]!=="_p"&&f[0]!=="cpos"){h+='"'+f[0]+'":"'+f[1]+'"'}else{h+='"'+f[0]+'":'+f[1]}}}}h="{"+h+"}";this._beaconEvent("secvw",h)}});b.namespace("Media").MediaContentSocialBase=a},"0.0.2",{requires:["base","event-base","event-custom","node-base","node-core","io","json"]});/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-parse",function(e,t){e.mix(e.namespace("XML"),{parse:function(t){var n=null,r;return typeof t=="string"&&(r=e.config.win,r.ActiveXObject!==undefined?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)):r.DOMParser!==undefined?n=(new DOMParser).parseFromString(t,"text/xml"):r.Windows!==undefined&&(n=new Windows.Data.Xml.Dom.XmlDocument,n.loadXml(t))),n===null||n.documentElement===null||n.documentElement.nodeName==="parsererror",n}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.16.0");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-xdr",function(e,t){function a(e,t,n){var r='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0">'+'<param name="movie" value="'+e+'">'+'<param name="FlashVars" value="yid='+t+"&uid="+n+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",i=s.createElement("div");s.body.appendChild(i),i.innerHTML=r}function f(t,n,r){return n==="flash"&&(t.c.responseText=decodeURI(t.c.responseText)),r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(t,n,i){var s=this;return i.xdr.use==="flash"?(r[n.id]=i,o.setTimeout(function(){try{n.c.send(t,{id:n.id,uid:n.uid,method:i.method,data:i.data,headers:i.headers})}catch(e){s.xdrResponse("transport error",n,i),delete r[n.id]}},e.io.xdr.delay)):u?(s._ieEvt(n,i),n.c.open(i.method||"GET",t),setTimeout(function(){n.c.send(i.data)},0)):n.c.send(t,n,i),{id:n.id,abort:function(){return n.c?l(n,i):!1},isInProgress:function(){return n.c?c(n.id):!1},io:s}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(t){t.id==="flash"&&(a(e.UA.ie?t.src+"?d="+(new Date).valueOf().toString():t.src,e.id,t.uid),e.IO.transports.flash=function(){return s.getElementById("io_swf")})}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"3.16.0",{requires:["io-base","datatype-xml-parse"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-form",function(e,t){var n=encodeURIComponent;e.IO.stringify=function(t,n){n=n||{};var r=e.IO.prototype._serialize({id:t,useDisabled:n.useDisabled},n.extra&&typeof n.extra=="object"?e.QueryString.stringify(n.extra):n.extra);return r},e.mix(e.IO.prototype,{_serialize:function(t,r){var i=[],s=t.useDisabled||!1,o=0,u=typeof t.id=="string"?t.id:t.id.getAttribute("id"),a,f,l,c,h,p,d,v,m,g;u||(u=e.guid("io:"),t.id.setAttribute("id",u)),f=e.config.doc.getElementById(u);if(!f||!f.elements)return r||"";for(p=0,d=f.elements.length;p<d;++p){a=f.elements[p],h=a.disabled,l=a.name;if(s?l:l&&!h){l=n(l)+"=",c=n(a.value);switch(a.type){case"select-one":a.selectedIndex>-1&&(g=a.options[a.selectedIndex],i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"select-multiple":if(a.selectedIndex>-1)for(v=a.selectedIndex,m=a.options.length;v<m;++v)g=a.options[v],g.selected&&(i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"radio":case"checkbox":a.checked&&(i[o++]=l+c);break;case"file":case undefined:case"reset":case"button":break;case"submit":default:i[o++]=l+c}}}return r&&(i[o++]=r),i.join("&")}},!0)},"3.16.0",{requires:["io-base","node-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-upload-iframe",function(e,t){function u(t,n,r){var i=e.Node.create('<iframe id="io_iframe'+t.id+'" name="io_iframe'+t.id+'" />');i._node.style.position="absolute",i._node.style.top="-1000px",i._node.style.left="-1000px",e.one("body").appendChild(i),e.on("load",function(){r._uploadComplete(t,n)},"#io_iframe"+t.id)}function a(t){e.Event.purgeElement("#io_iframe"+t,!1),e.one("body").removeChild(e.one("#io_iframe"+t))}var n=e.config.win,r=e.config.doc,i=r.documentMode&&r.documentMode>=8,s=decodeURIComponent,o=e.IO.prototype.end;e.mix(e.IO.prototype,{_addData:function(t,n){e.Lang.isObject(n)&&(n=e.QueryString.stringify(n));var i=[],o=n.split("="),u,a;for(u=0,a=o.length-1;u<a;u++)i[u]=r.createElement("input"),i[u].type="hidden",i[u].name=s(o[u].substring(o[u].lastIndexOf("&")+1)),i[u].value=u+1===a?s(o[u+1]):s(o[u+1].substring(0,o[u+1].lastIndexOf("&"))),t.appendChild(i[u]);return i},_removeData:function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)e.removeChild(t[n])},_setAttrs:function(t,n,r){this._originalFormAttrs={action:t.getAttribute("action"),target:t.getAttribute("target")},t.setAttribute("action",r),t.setAttribute("method","POST"),t.setAttribute("target","io_iframe"+n),t.setAttribute(e.UA.ie&&!i?"encoding":"enctype","multipart/form-data")},_resetAttrs:function(t,n){e.Object.each(n,function(e,n){e?t.setAttribute(n,e):t.removeAttribute(n)})},_startUploadTimeout:function(e,t){var r=this;r._timeout[e.id]=n.setTimeout(function(){e.status=0,e.statusText="timeout",r.complete(e,t),r.end(e,t)},t.timeout)},_clearUploadTimeout:function(e){var t=this;n.clearTimeout(t._timeout[e]),delete t._timeout[e]},_uploadComplete:function(t,r){var i=this,s=e.one("#io_iframe"+t.id).get("contentWindow.document"),o=s.one("body"),u;r.timeout&&i._clearUploadTimeout(t.id);try{o?(u=o.one("pre:first-child"),t.c.responseText=u?u.get("text"):o.get("text")):t.c.responseXML=s._node}catch(f){t.e="upload failure"}i.complete(t,r),i.end(t,r),n.setTimeout(function(){a(t.id)},0)},_upload:function(t,n,i){var s=this,o=typeof i.form.id=="string"?r.getElementById(i.form.id):i.form.id,u;return s._setAttrs(o,t.id,n),i.data&&(u=s._addData(o,i.data)),i.timeout&&s._startUploadTimeout(t,i),o.submit(),s.start(t,i),i.data&&s._removeData(o,u),{id:t.id,abort:function(){t.status=0,t.statusText="abort";if(!e.one("#io_iframe"+t.id))return!1;a(t.id),s.complete(t,i),s.end(t,i)},isInProgress:function(){return e.one("#io_iframe"+t.id)?!0:!1},io:s}},upload:function(e,t,n){return u(e,n,this),this._upload(e,t,n)},end:function(e,t){var n,i;return t&&(n=t.form,n&&n.upload&&(i=this,n=typeof n.id=="string"?r.getElementById(n.id):n.id,n&&i._resetAttrs(n,this._originalFormAttrs))),o.call(this,e,t)}},!0)},"3.16.0",{requires:["io-base","node-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("queue-promote",function(e,t){e.mix(e.Queue.prototype,{indexOf:function(t){return e.Array.indexOf(this._q,t)},promote:function(e){var t=this.indexOf(e);t>-1&&this._q.unshift(this._q.splice(t,1)[0])},remove:function(e){var t=this.indexOf(e);t>-1&&this._q.splice(t,1)}})},"3.16.0",{requires:["yui-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-queue",function(e,t){function r(e,t){return n.queue.apply(n,[e,t])}var n=e.io._map["io:0"]||new e.IO;e.mix(e.IO.prototype,{_q:new e.Queue,_qActiveId:null,_qInit:!1,_qState:1,_qShift:function(){var e=this,t=e._q.next();e._qActiveId=t.id,e._qState=0,e.send(t.uri,t.cfg,t.id)},queue:function(t,n){var r=this,i={uri:t,cfg:n,id:this._id++};return r._qInit||(e.on("io:complete",function(e,t){r._qNext(e)},r),r._qInit=!0),r._q.add(i),r._qState===1&&r._qShift(),i},_qNext:function(e){var t=this;t._qState=1,t._qActiveId===e&&t._q.size()>0&&t._qShift()},qPromote:function(e){this._q.promote(e)},qRemove:function(e){this._q.remove(e)},qEmpty:function(){this._q=new e.Queue},qStart:function(){var e=this;e._qState=1,e._q.size()>0&&e._qShift()},qStop:function(){this._qState=0},qSize:function(){return this._q.size()}},!0),r.start=function(){n.qStart()},r.stop=function(){n.qStop()},r.promote=function(e){n.qPromote(e)},r.remove=function(e){n.qRemove(e)},r.size=function(){n.qSize()},r.empty=function(){n.qEmpty()},e.io.queue=r},"3.16.0",{requires:["io-base","queue-promote"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-parse",function(e,t){e.mix(e.namespace("Date"),{parse:function(t){var n=new Date(+t||t);return e.Lang.isDate(n)?n:null}}),e.namespace("Parsers").date=e.Date.parse,e.namespace("DataType"),e.DataType.Date=e.Date},"3.16.0");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/datatype-date-format_en-US",function(e){e.Intl.add("datatype-date-format","en-US",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"3.16.0");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-format",function(e,t){var n=function(e,t,n){typeof n=="undefined"&&(n=10),t+="";for(;parseInt(e,10)<n&&n>1;n/=10)e=t+e;return e.toString()},r={formats:{a:function(e,t){return t.a[e.getDay()]},A:function(e,t){return t.A[e.getDay()]},b:function(e,t){return t.b[e.getMonth()]},B:function(e,t){return t.B[e.getMonth()]},C:function(e){return n(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return n(parseInt(r.formats.G(e)%100,10),0)},G:function(e){var t=e.getFullYear(),n=parseInt(r.formats.V(e),10),i=parseInt(r.formats.W(e),10);return i>n?t++:i===0&&n>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return n(t===0?12:t,0)},j:function(e){var t=new Date(""+e.getFullYear()+"/1/1 GMT"),r=new Date(""+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT"),i=r-t,s=parseInt(i/6e4/60/24,10)+1;return n(s,0,100)},k:["getHours"," "],l:function(e){var t=e.getHours()%12;return n(t===0?12:t," ")},m:function(e){return n(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,t){return t.p[e.getHours()>=12?1:0]},P:function(e,t){return t.P[e.getHours()>=12?1:0]},s:function(e,t){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){var t=e.getDay();return t===0?7:t},U:function(e){var t=parseInt(r.formats.j(e),10),i=6-e.getDay(),s=parseInt((t+i)/7,10);return n(s,0)},V:function(e){var t=parseInt(r.formats.W(e),10),i=(new Date(""+e.getFullYear()+"/1/1")).getDay(),s=t+(i>4||i<=1?0:1);return s===53&&(new Date(""+e.getFullYear()+"/12/31")).getDay()<4?s=1:s===0&&(s=r.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),n(s,0)},w:"getDay",W:function(e){var t=parseInt(r.formats.j(e),10),i=7-r.formats.u(e),s=parseInt((t+i)/7,10);return n(s,0,10)},y:function(e){return n(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),r=n(parseInt(Math.abs(t/60),10),0),i=n(Math.abs(t%60),0);return(t>0?"-":"+")+r+i},Z:function(e){var t=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return t.length>4&&(t=r.formats.z(e)),t},"%":function(e){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(t,i){i=i||{};if(!e.Lang.isDate(t))return e.Lang.isValue(t)?t:"";var s,o,u,a,f;s=i.format||"%Y-%m-%d",o=e.Intl.get("datatype-date-format");var l=function(e,t){if(u&&t==="r")return o[t];var n=r.aggregates[t];return n==="locale"?o[t]:n},c=function(i,s){var u=r.formats[s];switch(e.Lang.type(u)){case"string":return t[u]();case"function":return u.call(t,t,o);case"array":if(e.Lang.type(u[0])==="string")return n(t[u[0]](),u[1]);default:return s}};while(s.match(/%[cDFhnrRtTxX]/))s=s.replace(/%([cDFhnrRtTxX])/g,l);var h=s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,c);return l=c=undefined,h}};e.mix(e.namespace("Date"),r),e.namespace("DataType"),e.DataType.Date=e.Date},"3.16.0",{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-math",function(e,t){var n=e.Lang;e.mix(e.namespace("Date"),{isValidDate:function(e){return n.isDate(e)&&isFinite(e)&&e!="Invalid Date"&&!isNaN(e)&&e!=null?!0:!1},areEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()==t.getTime()},isGreater:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>t.getTime()},isGreaterOrEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>=t.getTime()},isInRange:function(e,t,n){return this.isGreaterOrEqual(e,t)&&this.isGreaterOrEqual(n,e)},addDays:function(e,t){return new Date(e.getTime()+864e5*t)},addMonths:function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12;var i=new Date(e.getTime());return i.setFullYear(n),i.setMonth(r),i},addYears:function(e,t){var n=e.getFullYear()+t,r=new Date(e.getTime());return r.setFullYear(n),r},listOfDatesInMonth:function(e){if(!this.isValidDate(e))return[];var t=this.daysInMonth(e),n=e.getFullYear(),r=e.getMonth(),i=[];for(var s=1;s<=t;s++)i.push(new Date(n,r,s,12,0,0));return i},daysInMonth:function(e){if(!this.isValidDate(e))return 0;var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];if(t!=1)return n[t];var r=e.getFullYear();return r%400===0?29:r%100===0?28:r%4===0?29:28}}),e.namespace("DataType"),e.DataType.Date=e.Date},"3.16.0",{requires:["yui-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-parse",function(e,t){var n=e.Escape.regex,r="\\s*";e.mix(e.namespace("Number"),{_buildParser:e.cached(function(e,t,i,s){var o=[],u;return e&&o.push("^"+r+n(e)+r),t&&o.push(r+n(t)+r+"$"),i&&o.push(n(i)+"(?=\\d)"),u=new RegExp("(?:"+o.join("|")+")","g"),s==="."&&(s=null),function(e){return e=e.replace(u,""),s?e.replace(s,"."):e}}),parse:function(t,n){var r;n&&typeof t=="string"&&(r=this._buildParser(n.prefix,n.suffix,n.thousandsSeparator,n.decimalSeparator),t=r(t)),typeof t=="string"&&e.Lang.trim(t)!==""&&(t=+t);if(typeof t!="number"||!isFinite(t))t=null;return t}}),e.namespace("Parsers").number=e.Number.parse,e.namespace("DataType"),e.DataType.Number=e.Number},"3.16.0",{requires:["escape"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-format",function(e,t){var n=e.Lang;e.mix(e.namespace("Number"),{format:function(e,t){if(n.isNumber(e)){t=t||{};var r=e<0,i=e+"",s=t.decimalPlaces,o=t.decimalSeparator||".",u=t.thousandsSeparator,a,f,l,c;n.isNumber(s)&&s>=0&&s<=20&&(i=e.toFixed(s)),o!=="."&&(i=i.replace(".",o));if(u){a=i.lastIndexOf(o),a=a>-1?a:i.length,f=i.substring(a);for(l=0,c=a;c>0;c--)l%3===0&&c!==a&&(!r||c>1)&&(f=u+f),f=i.charAt(c-1)+f,l++;i=f}return i=t.prefix?t.prefix+i:i,i=t.suffix?i+t.suffix:i,i}return n.isValue(e)&&e.toString?e.toString():""}}),e.namespace("DataType"),e.DataType.Number=e.Number},"3.16.0");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-format",function(e,t){var n=e.Lang;e.mix(e.namespace("XML"),{format:function(e){try{if(!n.isUndefined(e.getXml))return e.getXml();if(!n.isUndefined(XMLSerializer))return(new XMLSerializer).serializeToString(e)}catch(t){return e&&e.xml?e.xml:n.isValue(e)&&e.toString?e.toString():""}}}),e.namespace("DataType"),e.DataType.XML=e.XML},"3.16.0");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-parse",function(e,t){var n=e.namespace("QueryString"),r=function(t){return function r(i,s){var o,u,a,f,l;return arguments.length!==2?(i=i.split(t),r(n.unescape(i.shift()),n.unescape(i.join(t)))):(i=i.replace(/^\s+|\s+$/g,""),e.Lang.isString(s)&&(s=s.replace(/^\s+|\s+$/g,""),isNaN(s)||(u=+s,s===u.toString(10)&&(s=u))),o=/(.*)\[([^\]]*)\]$/.exec(i),o?(f=o[2],a=o[1],f?(l={},l[f]=s,r(a,l)):r(a,[s])):(l={},i&&(l[i]=s),l))}},i=function(t,n){return t?e.Lang.isArray(t)?t.concat(n):!e.Lang.isObject(t)||!e.Lang.isObject(n)?[t].concat(n):s(t,n):n},s=function(e,t){for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]));return e};n.parse=function(t,n,s){return e.Array.reduce(e.Array.map(t.split(n||"&"),r(s||"=")),{},i)},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"3.16.0",{requires:["yui-base","array-extras"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"3.16.0",{requires:["yui-base"]});

/* content-share-buttons.js 1027a0f */ YUI.add("media-content-share-buttons",function(a){function b(c){b.superclass.constructor.apply(this,arguments)}b.NAME="mediacontentsharebuttons";a.extend(b,a.Media.MediaContentSocialBase,{initializer:function(d){var c=this;this.device=(a.Media&&a.Media.pageChrome&&a.Media.pageChrome.getDevice)?a.Media.pageChrome.getDevice():"full";this.modNode=a.one(d.modNode);this._onClickHandlers={};this.config=d;this.mod_id=b.NAME;this.rumbleStrips=null;this.rumbleStripsLight=null;this.clickLight=false;this.isCallingFeatureStory=false;this.showingFeatureStory=true;this.userConnectStatus=this.config.userConnectStatus;this.checkPosInterval=null;this.checkPosIntervalCount=0;this._hasNativeTopButtons=(null!==a.one(".yom-share-btns-container.light .share-btns-int-container"));if(this._hasNativeTopButtons){this._handleTopButtons();this._bindTopButtonsEvt()}this.modNode.all(".share-btn a").setAttribute("data-share-sec","sh").setAttribute("data-share-pos","bottom");this._bindEvt();this.config.pageData.url=window.location.href;if(this.config.switches.shortenLink&&this.modNode.one(".share-link")&&this.modNode.one(".share-link").get("value")){a.on("load",this._linkShortening(encodeURIComponent(this.modNode.one(".share-link").get("value"))),this)}this._updateShareImage();if((this.config.pageData.ult_test=="social_on"||this.config.pageData.ult_test=="social_off"||this.config.pageData.ult_test=="social_link"||this.config.pageData.ult_test=="gs133")&&a.one(".interest-bar .actions")){a.one(".interest-bar .actions").setStyle("visibility","hidden")}if(this.config.pageData.ult_test=="gs133"){this._displaySocialCount();this._registerEventForSocialCount()}},_handleTopButtons:function(){var d=a.one(".yom-share-btns-container.light"),c=a.one(".yom-share-btns-rumblestrips");if(!d){return}d.setAttribute("id",b.NAME+"-light");d.all(".share-btn a").removeAttribute("data-ylk").removeAttribute("data-rapid_p").removeAttribute("data-action-outcome").setAttribute("data-share-pos","top").setAttribute("data-share-sec","sh-lt");if(c&&this.config.switches.rumble===true){var e=a.Node.create('<div class="yom-share-btns-rumblestrips-light hide">'+c.get("innerHTML")+"</div>");e.all("a").removeAttribute("data-ylk");e.all("a").removeAttribute("data-rapid_p");e.all("a").removeAttribute("data-action-outcome");var f=a.one(".credit-bar");if(f){f.insert(e)}this._updateMixer("userstatus",this.config.config,this.config.contentMetaData)}},_bindEvt:function(){var e=a.one(".yog-bd");this.modNode.detach("share-btn|*");this.modNode.delegate("share-btn|click",function(k){this._beaconEvent("click",{t1:"a3",t2:"sh-cp",sec:"sh-cp",elm:"inpt",elmt:"copy",slk:"copy-vid",itc:1})},".btn-embed.btnDisabled",this);if(this.modNode.one(".share-link")){this._onClickHandlers.shareLink=this.modNode.one(".share-link").on("share-btn|click",this._clickLink,this);this._onClickHandlers.shareLinkNoCopy=this.modNode.one(".share-link").on("share-btn|keypress",this._preventCopy,this);this._onClickHandlers.shareLinkIcon=this.modNode.one(".share-link-icon").on("share-btn|click",this._clickLink,this);this.modNode.delegate("share-btn|focus",function(k){this._beaconEvent("click",{t1:"a3",t2:"sh-cp",sec:"sh-cp",elm:"inpt",elmt:"copy",slk:"copy",itc:1})},".share-link",this);this.modNode.delegate("share-btn|click",function(k){this._beaconEvent("click",{t1:"a3",t2:"sh-cp",sec:"sh-cp",elm:"icn",elmt:"copy",slk:"copy",itc:1})},".share-link-icon",this)}this._onClickHandlers.mixerUpdate=a.Global.on("share-btn|"+this.mod_id+":popupClose",function(k){var m="share",l="";if(k&&k.name){switch(k.name){case"facebook":m="fbshare";l="fb";break;case"twitter":m="twitter";l="tw";break;case"mail":m="email";l="ma";break;case"tumblr":m="tumblr";l="tu";break;case"pinterest":m="pinterest";l="pi";break;case"gplus":m="gplus";l="gp";break;case"linkedin":m="linkedin";l="li";break;case"whatsapp":m="whatsapp";l="wa";break;default:m="share"}}this._updateMixer(m,this.config.config,this.config.contentMetaData)},this);if(this.device!="smartphone"){this._onClickHandlers.modBtnClick=this.modNode.delegate("share-btn|click",function(k){this.clickLight=false},"a",this);this._onClickHandlers.embed=this.modNode.delegate("share-btn|click",this._clickEmbed,".video-embed-wrap .embed-button",this);this.modNode.detach("rumblestrips|*");a.Global.detach("rumblestrips|*");this._onClickHandlers.rumbleStrip={};this._onClickHandlers.rumbleStrip.hide=a.Global.on("rumblestrips|"+this.mod_id+":clickButton",function(k){this._updateUserStatus();this._getFeaturedStory();this._hideRumbleStrips()},this);this._onClickHandlers.rumbleStrip.open=a.Global.on("rumblestrips|rumbleStrip:open",function(k){if("-top"===k.pos){this.clickLight=true}else{if("-bottom"===k.pos){this.clickLight=false}else{return}}if("facebook"===k.name){this._showRumbleStrips("fb")}else{if("twitter"===k.name){this._showRumbleStrips("tw")}else{this._showRumbleStrips()}}},this);if(this.config.switches.rumble===true){var g=null,j=null;function h(){if(g&&j&&g.closed){clearInterval(j);this.clickLight=false;YMedia.Media.shareButtons._hideRumbleStrips("link")}}if(!this.rumbleStrips&&a.one(".yom-share-btns-rumblestrips")){this.rumbleStrips=a.one(".yom-share-btns-rumblestrips");this.rumbleStripsHide=this.rumbleStrips.all(".close-btn a");if(this.rumbleStripsHide){this.rumbleStripsHide.on("rumblestrips|click",function(k){k.preventDefault();this.clickLight=false;this._hideRumbleStrips("close")},this)}var d=this.rumbleStrips.all(".login-btn");if(d){d.on("rumblestrips|click",function(k){k.preventDefault();k.stopPropagation();this.clickLight=false;if(k.currentTarget.hasClass("yahoo")){this._popupWindow(k.currentTarget.getAttribute("href"),"signup",850,700,true);this._beaconEvent("click",{t1:"a0",t2:"sh-si",sec:"sh-si",elm:"itm",elmt:"lgn-yh",slk:"lgn-yh",itc:1},"lgn")}else{g=this._popupWindow(k.currentTarget.getAttribute("href"),"link",500,450,true);if(k.currentTarget.hasClass("facebook")){this._beaconEvent("click",{t1:"a0",t2:"sh-cn",sec:"sh-cn",slk:"cnct-fb",itc:1,elm:"btn",elmt:"cnct-fb",_p:1},"cnct")}else{if(k.currentTarget.hasClass("twitter")){this._beaconEvent("click",{t1:"a0",t2:"sh-cn",sec:"sh-cn",slk:"cnct-tw",itc:1,elm:"btn",elmt:"cnct-tw",_p:1},"cnct")}else{return}}}if(g){j=setInterval(h,500)}},this)}var f=this.rumbleStrips.all(".follow-list a");if(0<f.size()){f.on("rumblestrips|click",function(k){if(k.currentTarget.hasClass("facebook")){this._beaconEvent("click",{t1:"a0",t2:"sh-fw",sec:"sh-fw",elm:"icn",elmt:"sh-fb",cpos:1,slk:"sh-fb",itc:0,_p:1,rspns:"nav"},"sh")}if(k.currentTarget.hasClass("twitter")){this._beaconEvent("click",{t1:"a0",t2:"sh-fw",sec:"sh-fw",elm:"icn",elmt:"sh-tw",cpos:2,slk:"sh-tw",itc:0,_p:2,rspns:"nav"},"sh")}},this)}}}}else{if(this.modNode.one(".hover-share-btns-container")){var c=a.one("body");c.detach("share-btn|*");if(a.UA.android>0){var i=this;c.on("share-btn|touchstart",function(k){i._handleScrollStart(k)});c.on("share-btn|touchcancel",function(k){i._handleScrollEnd(k);if(i.checkPosInterval===null){i.checkPosInterval=setInterval(function(){var m=a.one("body").get("scrollTop"),l=a.one("body").get("winHeight"),n=i.modNode.getY();i.checkPosIntervalCount++;if(m<50||n<50+m+l){i._handleScrollStart(k);clearInterval(i.checkPosInterval);i.checkPosInterval=null;i.checkPosIntervalCount=0}if(i.checkPosIntervalCount>15){clearInterval(i.checkPosInterval);i.checkPosInterval=null;i.checkPosIntervalCount=0}},300)}})}else{c.on("share-btn|gesturemovestart",this._handleScrollStart,null,this);c.on("share-btn|gesturemoveend",this._handleScrollEnd,null,this)}}}},_handleScrollStart:function(d){if(d.target.hasClass("btn-icon")||d.target.ancestor(".hover-share-btns-container")){return}var c=this.modNode.one(".hover-share-btns-container");if(!c.hasClass("hidden")){c.setStyles({transition:"opacity 0s",opacity:"0"});c.addClass("hidden")}},_handleScrollEnd:function(d){var c=this;setTimeout(function(){var f=c.modNode.one(".hover-share-btns-container"),g=a.one("body").get("scrollTop"),e=a.one("body").get("winHeight"),h=c.modNode.getY();if(g<50||h<50+g+e){return}if(f.hasClass("hidden")){f.setStyles({transition:"opacity 0.4s ease-in-out"});f.removeClass("hidden");setTimeout(function(){f.setStyles({opacity:"1"})},10)}},300)},_bindEmbedEvt:function(){this._onClickHandlers.embedChkbox=this.modNode.delegate("share-btns-embed-dialog-container|click",this._clickEmbedChkbox,".share-btns-embed-dialog input[type=checkbox]",this);this._onClickHandlers.embedSlct=this.modNode.delegate("share-btns-embed-dialog-container|click",this._clickEmbedSlct,".share-btns-embed-dialog li",this);this._onClickHandlers.embedOption=this.modNode.delegate("share-btns-embed-dialog-container|click",this._clickOption,".share-btns-embed-dialog .option-button",this);this._onClickHandlers.embedCustomInputWidth=this.modNode.delegate("share-btns-embed-dialog-container|change",this._clickEmbedCustomInputWidth,".share-btns-embed-dialog #video-width",this);this._onClickHandlers.embedCustomInputHeight=this.modNode.delegate("share-btns-embed-dialog-container|change",this._clickEmbedCustomInputHeight,".share-btns-embed-dialog #video-height",this)},_bindTopButtonsEvt:function(){var g=a.one("#"+b.NAME+"-light");if(!g){return}g.detach("share-btn|*");if(this.device!="smartphone"){g.delegate("share-btn|click",function(k){var j=k.currentTarget.getAttribute("data-share-key");if(j){this.clickLight=true;a.Global.fire(this.mod_id+":clickButton");a.Global.fire(this.mod_id+":"+j,k.currentTarget)}},"a",this);if(this.config.switches.rumble===true){var f=null,i=null;function h(){if(f&&i&&f.closed){clearInterval(i);this.clickLight=true;YMedia.Media.shareButtons._hideRumbleStrips("link")}}if(!this.rumbleStripsLight&&a.one(".yom-share-btns-rumblestrips-light")){this.rumbleStripsLight=a.one(".yom-share-btns-rumblestrips-light");this.rumbleStripsLight.detach("rumblestrips|*");this.rumbleStripsHideLight=this.rumbleStripsLight.all(".close-btn a");if(this.rumbleStripsHideLight){this.rumbleStripsHideLight.on("rumblestrips|click",function(j){j.preventDefault();this.clickLight=true;this._hideRumbleStrips("close")},this)}var c=this.rumbleStripsLight.all(".login-btn");if(c){c.on("rumblestrips|click",function(j){j.preventDefault();j.stopPropagation();this.clickLight=true;if(j.currentTarget.hasClass("yahoo")){this._popupWindow(j.currentTarget.getAttribute("href"),"signup",850,700,true);this._beaconEvent("click",{t1:"a0",t2:"sh-si",sec:"sh-si",elm:"itm",elmt:"lgn-yh",slk:"lgn-yh",itc:1},"lgn")}else{f=this._popupWindow(j.currentTarget.getAttribute("href"),"link",500,450,true);if(j.currentTarget.hasClass("facebook")){this._beaconEvent("click",{t1:"a0",t2:"sh-cn",sec:"sh-cn",slk:"cnct-fb",itc:1,elm:"btn",elmt:"cnct-fb",_p:1},"cnct")}else{if(j.currentTarget.hasClass("twitter")){this._beaconEvent("click",{t1:"a0",t2:"sh-cn",sec:"sh-cn",slk:"cnct-tw",itc:1,elm:"btn",elmt:"cnct-tw",_p:1},"cnct")}else{return}}}if(f){i=setInterval(h,500)}},this)}var d=this.rumbleStripsLight.all(".follow-property-facebook a"),e=this.rumbleStripsLight.all(".follow-property-twitter a");d.on("rumblestrips|click",function(j){this._beaconEvent("click",{t1:"a0",t2:"sh-fw",sec:"sh-fw",elm:"icn",elmt:"sh-fb",cpos:1,slk:"sh-fb",itc:0,_p:1,rspns:"nav"},"sh")},this);e.on("rumblestrips|click",function(j){this._beaconEvent("click",{t1:"a0",t2:"sh-fw",sec:"sh-fw",elm:"icn",elmt:"sh-fb",cpos:2,slk:"sh-tw",itc:0,_p:2,rspns:"nav"},"sh")},this)}}}},_registerEventForSocialCount:function(){var d=this,e=a.one(".yom-share-btns-container.light .share-count"),c=this.modNode.one(".share-count");a.Global.detach("socialCount|*");a.Global.on("socialCount|rumbleStrip:open",function(g){console.log(g);if(g.pos=="-top"||g.pos=="-bottom"){var f=c.one(".share-number").get("text");d._updateSocialCount([e,c],parseInt(f)+1)}})},_updateSocialCount:function(c,e){for(var d=0;d<c.length;d++){if(c[d]&&c[d].one(".share-number")){c[d].one(".share-number").set("text",this._formatNumber(e));c[d].removeClass("hidden")}}},_displaySocialCount:function(){var e=a.one(".yom-share-btns-container.light .share-count"),c=this.modNode.one(".share-count"),g=a.one('link[rel="canonical"]'),d=window.location.href,f=(a.Media&&a.Media.pageChrome&&a.Media.pageChrome.getContentId())||null;if(d&&f){a.io("/_xhr/social/count/",{method:"GET",data:{url:d,uuid:f},on:{success:function(k,j){if(j.responseText){var h=a.JSON.parse(j.responseText),i=0;for(count in h){if("debug"!==count){i+=h[count]}}if(i>0){this._updateSocialCount([e,c],i)}}}},context:this})}},_formatNumber:function(d){var c=(d>=1000000)?{count:(d/1000000),decimalPlaces:1,suffix:"m"}:(d>=1000)?{count:(d/1000),decimalPlaces:1,suffix:"k"}:{count:d,decimalPlaces:0};return a.Number.format(c.count,c)},_closeEmbedDialog:function(j){var f=a.one(".share-btns-embed-dialog-container"),i=a.one(".yom-share-btns-container .video-embed-wrap .btn-embed");if(f&&i&&!f.hasClass("hide")&&j.target!=i){f.addClass("hide");i.toggleClass("btnEnabled").toggleClass("btnDisabled");var h=a.one(".share-btns-embed-dialog-container .checkMark"),c=a.one(".share-btns-embed-dialog-container .custom-input"),k=a.one(".share-btns-embed-dialog-container #video-width"),d=a.one(".share-btns-embed-dialog-container #video-height"),g=null;if(!c.hasClass("hide")&&(!k.get("value")||!d.get("value"))){c.addClass("hide");if(h&&h.ancestor()&&h.ancestor().getAttribute("value")){g=a.JSON.parse(h.ancestor().getAttribute("value"));a.one(".js-option-title").set("innerHTML",g.width+" x "+g.height)}}}},_closeSizeOption:function(f){var c=a.one(".share-btns-embed-dialog-container .size-ul"),g=a.one(".share-btns-embed-dialog-container .down-arrow2"),d=a.one(".share-btns-embed-dialog-container .option-button");if(c&&!c.hasClass("hide")&&f.target!=c&&f.target!=g&&f.target!=d){c.addClass("hide")}},_clickEmbed:function(g){g.preventDefault();var n=a.one(".share-btns-embed-dialog-container");if(n){var h=g.currentTarget.getX(),f=g.currentTarget.getY(),d=a.one(".yom-share-btns-container .video-embed-wrap .btn-embed"),i=n.one("textarea");n.toggleClass("hide").setXY([h-115,f+38]).setStyle("top","6px");d.toggleClass("btnEnabled").toggleClass("btnDisabled");i.select()}else{var k=/http/,l=this._getVideoUrl(),c=this._getEmbedIframeString(this.config.videoData.videoWidth,this.config.videoData.videoHeight,l);if(k.test(l)){var j='<div class="share-btns-embed-dialog-container hide"><span class="dialog-arrow"></span><span class="dialog-arrow2"></span><div class="share-btns-embed-dialog"><div class="hd">'+this.config.videoData.embedDialogTitle+'</div><div class="bd"><textarea rows="1" cols="42" class="txtarea">'+c+"</textarea></div>",m='<div class="ft"><div class="size-option"><span class="option-text">'+this.config.videoData.embedDialogSize+'</span><div class="option-button"><span class="js-option-title">'+this.config.videoData.videoWidth+" x "+this.config.videoData.videoHeight+'</span><span class="down-arrow"></span><span class="down-arrow2"></span></div><div class="size-ul hide"><ul>'+this.config.videoData.videoSizeOptions+'<li value="custom">'+this.config.videoData.embedTextCustom+'</li></ul></div></div><div class="custom-input hide"><input id="video-width"><span>x</span><input id="video-height"></div></div>';if(this.config.videoData.videoWidth&&this.config.videoData.videoHeight&&this.config.videoData.videoSizeOptions){j+=m}this.modNode.appendChild(j)}}},_clickEmbedChkbox:function(h){var d=a.one(".share-btns-embed-dialog-container .txtarea"),f=a.Node.create(d.get("value")),g="";var c=f.get("width"),i=f.get("height");g=this._getEmbedIframeString(c,i,this._getVideoUrl());d.set("value",g)},_clickOption:function(d){d.preventDefault();d.stopPropagation();var c=a.one(".share-btns-embed-dialog-container .size-ul");c.toggleClass("hide")},_getEmbedIframeString:function(e,c,d){return'<iframe width="'+e+'" height="'+c+'" scrolling="no" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true" src="'+d+'"></iframe>'},_composeEmbedString:function(f,c,e){var h,d=a.one(".share-btns-embed-dialog-container textarea"),g=this._getVideoUrl();h=this._getEmbedIframeString(f,c,g);d.set("value",h);this._clickEmbedChkbox()},_getVideoUrl:function(){return((this.config&&this.config.videoData&&this.config.videoData.url)?this.config.videoData.url+"?format=embed&amp;player_autoplay=false":null)},_clickEmbedSlct:function(h){var c=a.one(".share-btns-embed-dialog-container .custom-input"),g=a.one(".share-btns-embed-dialog-container .size-ul");if(h.currentTarget.getAttribute("value")==="custom"){c.removeClass("hide");g.toggleClass("hide");a.one(".js-option-title").set("innerHTML",this.config.videoData.embedTextCustom);var i=a.one(".share-btns-embed-dialog-container #video-width"),d=a.one(".share-btns-embed-dialog-container #video-height");if(i.get("value")&&d.get("value")){g.all("li .checkMark").each(function(e){e.remove()});h.currentTarget.set("innerHTML",'<span class="checkMark">&#10003;</span>'+this.config.videoData.embedTextCustom);this._composeEmbedString(i.get("value"),d.get("value"),this.config.videoData.url);a.one(".share-btns-embed-dialog-container textarea").select()}}else{g.all("li .checkMark").each(function(e){e.remove()});var f=h.currentTarget.getAttribute("value");whPair=JSON.parse(f);c.addClass("hide");a.one(".js-option-title").set("innerHTML",h.currentTarget.get("innerHTML"));h.currentTarget.set("innerHTML",'<span class="checkMark">&#10003;</span>'+h.currentTarget.get("innerHTML"));this._composeEmbedString(whPair.width,whPair.height,this.config.videoData.url);a.one(".share-btns-embed-dialog-container textarea").select();g.toggleClass("hide")}},_clickEmbedCustomInputWidth:function(g){var h=a.one(".share-btns-embed-dialog-container #video-width"),c=a.one(".share-btns-embed-dialog-container #video-height"),f=/^\d+$/,d=this.config.videoData.ratio;if(!f.test(h.get("value"))){h.set("value","")}else{if(!isNaN(parseFloat(d))){c.set("value",parseInt(h.get("value")/parseFloat(d)));this._composeEmbedString(h.get("value"),c.get("value"),this.config.videoData.url);a.one(".share-btns-embed-dialog-container textarea").select();this._setCheckMark()}}},_clickEmbedCustomInputHeight:function(g){var h=a.one(".share-btns-embed-dialog-container #video-width"),c=a.one(".share-btns-embed-dialog-container #video-height"),f=/^\d+$/,d=this.config.videoData.ratio;if(!f.test(c.get("value"))){c.set("value","")}else{if(!isNaN(parseFloat(d))){h.set("value",parseInt(c.get("value")*parseFloat(d)));this._composeEmbedString(h.get("value"),c.get("value"),this.config.videoData.url);a.one(".share-btns-embed-dialog-container textarea").select();this._setCheckMark()}}},_setCheckMark:function(){a.all(".size-option li .checkMark").each(function(c){c.remove()});a.all(".share-btns-embed-dialog li").each(function(c){if(c.getAttribute("value")==="custom"){c.prepend('<span class="checkMark">&#10003;</span>')}})},_clickLink:function(d){d.preventDefault();d.stopPropagation();var c;if(d.currentTarget.get("nodeName").toLowerCase()==="input"){c=d.currentTarget}else{c=d.currentTarget.get("parentNode").one("input")}if(c){c.select();c.focus();c._node.setSelectionRange(0,9999)}},_preventCopy:function(c){if(!(c&&(c.altKey||c.ctrlKey||c.metaKey))){c.preventDefault()}return},_isLogin:function(){return !(this.config.loginStat.yahoo==0||this.config.loginStat.yahoo==null||typeof(this.config.loginStat.yahoo)=="undefined")},_updateUserStatus:function(){a.io("/_xhr/social/state/",{on:{method:"GET",success:function(f,d){if(d.responseText){var c=a.JSON.parse(d.responseText);this.config.loginStat.yahoo=c.loginStat;if(this.config.userConnectStatus){this.config.userConnectStatus.connectFacebook=c.connectFacebook;this.config.userConnectStatus.connectTwitter=c.connectTwitter}}}},context:this})},_popupWindow:function(d,l,e,m,k){if(d===undefined||d==""){return}var e=(e)?e:500,m=(m)?m:450,k=(k===undefined)?"yes":"no";var f=window.outerWidth||document.documentElement.clientWidth||document.body.clientWidth;var c=window.outerHeight||document.documentElement.clientHeight||document.body.clientHeight;var i=window.screenX||window.screenLeft||0;var g=window.screenY||window.screenTop||0;var h=(f/2)-(e/2)+i;var j=(c/2)-(m/2)+g;return window.open(d,l,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+k+", resizable=yes, copyhistory=no, width="+e+", height="+m+", top="+j+", left="+h)},_showRumbleStrips:function(e){var f=this.rumbleStrips,d="af";if(this.clickLight){f=this.rumbleStripsLight;d="bf"}if(!f){return}if(this.config.switches.rumble===true&&this.config.switches.hideRumble===false){f.all(".rumblestrips").addClass("hide");if(f.all(".rumblestrips.connect .login-link")){f.all(".rumblestrips.connect .login-link").addClass("hide");f.all(".rumblestrips.connect .login-title").addClass("hide")}if(!this._isLogin()){f.one(".rumblestrips.signup").removeClass("hide");this._beaconEvent("secvw",{t1:"a0",t2:"sh-si",sec:"sh-si"})}else{if(e=="fb"&&this.userConnectStatus&&this.userConnectStatus.connectFacebook===false){f.all(".rumblestrips.connect .facebook").removeClass("hide");f.one(".rumblestrips.connect").removeClass("hide");this._beaconEvent("secvw",{t1:"a0",t2:"sh-cn",sec:"sh-cn"})}else{if(e=="tw"&&this.userConnectStatus&&this.userConnectStatus.connectTwitter===false){f.all(".rumblestrips.connect .twitter").removeClass("hide");f.one(".rumblestrips.connect").removeClass("hide");this._beaconEvent("secvw",{t1:"a0",t2:"sh-cn",sec:"sh-cn"})}else{f.one(".rumblestrips.follow").removeClass("hide");this._beaconEvent("secvw",{t1:"a0",t2:"sh-fw",sec:"sh-fw",fbflw:"1",twflw:"1"})}}}var c="72px";if(f.one(".feature-story-list li")&&this.config.switches.featureStory===true&&this.device!="smartphone"&&this.config.pageData.type=="article"){f.one(".feature-story").removeClass("hide");this._beaconEvent("secvw",{t1:"a0",t2:"sh-rel",sec:"sh-rel"});c="242px"}else{this.showingFeatureStory=false}f.setStyle("height","0px");f.removeClass("hide");f.transition({duration:0.3,easing:"ease-in",height:c},function(){this.setStyle("height",c)})}else{if(this.config.switches.featureStory===true&&f.one(".feature-story-list li")&&this.device!="smartphone"&&this.config.pageData.type=="article"){f.removeClass("hide");f.one(".feature-story").removeClass("hide");f.transition({duration:0.3,easing:"ease-in",height:"194px"},function(){this.setStyle("height","194px")})}}},_hideRumbleStrips:function(d,c){var e=(this.clickLight)?this.rumbleStripsLight:this.rumbleStrips;if(!e){return}e.transition({easing:"ease-out",duration:0.3,height:0},function(){this.addClass("hide");e.all(".rumblestrips").addClass("hide")});if(d=="signup"){window.location.href="https://login.yahoo.com/config/refresh_cookie?.done="+encodeURIComponent(window.location.href);return}if(d=="link"){window.location.href="https://login.yahoo.com/config/refresh_cookie?.done="+encodeURIComponent(window.location.href);return}},_linkShortening:function(c){if(!c){c=encodeURIComponent(this.config.pageData.url)}if(this.config.switches.shortenLink&&this.config.switches.shortenLink=="bitly"){this._getShortenLinkUrl("bitly",c,function(g,d,e){var f=a.JSON.parse(d.responseText),h=this;if(f){if(a.one(".share-link")){a.one(".share-link").set("value",f)}}})}},_getFeaturedStory:function(){var f=this.rumbleStrips;if(this.clickLight){f=this.rumbleStripsLight}if(!f){return}if(this.config.switches.featureStory===true&&!f.one(".feature-story-list li")&&this.device!="smartphone"&&!this.isCallingFeatureStory&&this.config.pageData.type=="article"){this.isCallingFeatureStory=true;var e=(a.Media&&a.Media.pageChrome&&a.Media.pageChrome.getContentId)?a.Media.pageChrome.getContentId():YUI.namespace("Media").CONTENT_ID,d=this;var c="/_xhr/social_related_story_ib/?uuid="+e+"&site="+this.config.config.site;a.io(c,{on:{method:"GET",success:function(h,s){var q="";if(s.responseText){q=a.JSON.parse(s.responseText);var v=f.one("ul.feature-story-list");var k=0;var l=new Array();for(var o=0;o<q.length&&k<3;o++){if(e!=q[o].id){var r=q[o].title;var u="";if(r&&r.length>50){var t="";for(var n=0;n<50;n++){t+=r.charAt(n);if(r.charAt(n)==" "){u+=t;t=""}}u+="..."}else{u=r}var p="";if(q[o].img){p="background-image: url("+q[o].img.url+");"}var g=a.Node.create('<li class="feature-story-list-item default-background" style="'+p+'"><a class="feature-story-imglink" href="'+q[o].url+'" target="_blank"><div class="feature-story-gradient"><div class="feature-story-div" data-id="'+q[o].id+'"><span class="feature-story-link" title="'+q[o].title+'">'+u+'</span><br /><span class="feature-source">'+q[o].provider+"</span></div></div></a></li>");if(u&&q[o].url){if(q[o].img){g.setAttribute("data-index",k);g.on("click",function(i){var j=parseInt(this.getAttribute("data-index"))+1;d._beaconClick("sh-rel","imgstory",j,{t1:"a0",t2:"sh-rel",itc:0,elm:"img",elmt:"ct",pkgt:15,ct:1,cpos:j,_p:j,g:this.one(".feature-story-div").getAttribute("data-id"),prov:this.one(".feature-source").get("text"),rspns:"nav"})});v.append(g);k++}else{if(q[o].url){l.push(g)}}}}}var m=k;if(k<3&&l.length>0&&l.length+k>=3){for(var o=0;o<3-m;o++){l[o].setAttribute("data-index",k);l[o].on("click",function(i){var j=parseInt(this.getAttribute("data-index"))+1;d._beaconClick("sh-rel","txtstory",j,{t1:"a0",t2:"sh-rel",itc:0,elm:"hdln",elmt:"ct",pkgt:2,ct:1,cpos:j,_p:j,g:this.one(".feature-story-div").getAttribute("data-id"),prov:this.one(".feature-source").get("text"),rspns:"nav"})});v.append(l[o]);k++}}this.isCallingFeatureStory=false;if(k<3){f.all("ul.feature-story-list").empty()}f.one(".feature-story .close-btn a").on("click",function(i){d._beaconClick("sh-rel","close",1,{t1:"a0",t2:"sh-rel",itc:1,elm:"btn",elmt:"close",rspns:"cl"})});if(!this.showingFeatureStory&&k==3){f.one(".feature-story").removeClass("hide");this.showingFeatureStory=true;f.removeClass("hide");f.transition({duration:0.3,easing:"ease-in",height:"242px"},function(){this.setStyle("height","242px")})}}}},context:this})}},_updateShareImage:function(){var n=this.modNode.one(".facebook a"),f=this.modNode.one(".tumblr a"),l=this.modNode.one(".pinterest a"),m=n&&n.get("href"),e=f&&f.get("href"),i=l&&l.get("href"),j=a.one(".yom-share-btns-container.light"),h=this._getAlternativeImage();if(j){var d=j.one(".facebook a");tumblrLight=j.one(".tumblr a");pinterestLight=j.one(".pinterest a")}if(m&&-1!=m.indexOf("?")){var o=m.substr(0,m.indexOf("?")),k=a.QueryString.parse(m.substr(m.indexOf("?")+1));if(h&&k.picture&&k.picture.indexOf("social_default")>0){k.picture=h.get("src");n.set("href",o+"?"+a.QueryString.unescape(a.QueryString.stringify(k)));if(d){d.set("href",o+"?"+a.QueryString.unescape(a.QueryString.stringify(k)))}}}if(e&&-1!=e.indexOf("?")){var c=a.QueryString.parse(e.substr(e.indexOf("?")+1));if(h&&!c.clickthru){var g='<header><b><a href="'+c.url+'">'+a.one('meta[property="og:title"]').get("content")+"</a></b></header><br/><br/>";var p="https://www.tumblr.com/share/photo?clickthru="+encodeURIComponent(c.url)+"&caption="+encodeURIComponent("<article>"+g+"<section>"+c.description+"</section></article>")+"&source="+encodeURIComponent(h.get("src"));f.set("href",p);if(tumblrLight){tumblrLight.set("href",p)}}}if(i&&-1!=i.indexOf("?")){var r=i.substr(0,i.indexOf("?")),q=a.QueryString.parse(i.substr(i.indexOf("?")+1));if(h&&q.media&&q.media.indexOf("social_default")>0){q.media=h.get("src");l.set("href",r+"?"+a.QueryString.unescape(a.QueryString.stringify(q)));if(pinterestLight){pinterestLight.set("href",r+"?"+a.QueryString.unescape(a.QueryString.stringify(q)))}}}},_getAlternativeImage:function(){var c;c=a.one("img.editorial");if(!c){c=a.one("#mediacontentstory figure img")}return c},destructor:function(){}});a.namespace("Media").ContentShareButtons=b},"0.0.2",{requires:["base","event-base","node-base","node-core","io","json","datatype","querystring","media-content-social-base","transition"]});